[
  {
    "objectID": "player.html",
    "href": "player.html",
    "title": "Player",
    "section": "",
    "text": "source\n\nPlayer\n\n Player (player_id:str)\n\nA class to represent a player\n\np = Player(\"P1\")\np\n\nJesse Irvine, id: P1\n\n\n\nsource\n\n\nPlayer.summarize_player\n\n Player.summarize_player ()\n\nPrints a summary of the player’s stats\n\np.summarize_player()\n\nPlayer: Jesse Irvine\nMatches played: 3\nMatches won: 2\nPercentage of matches won: 66.67%\nGames played: 6\nGames won: 4\nPercentage of games won: 66.67%\nTeams: ['Jesse Irvine & Catherine Parenteau', 'Jesse Irvine & Anna Bright', 'Jesse Irvine & Lucy Kovalova']\n\n\n\nsource\n\n\nPlayer.partners_error_rate\n\n Player.partners_error_rate ()\n\nReturns the average error rate of the player’s partners\n\np.partners_error_rate()\n\n0.06830721826632076\n\n\n\nsource\n\n\nPlayer.partners_win_rate\n\n Player.partners_win_rate ()\n\nReturns the win rate of the player’s partners excluding games where the player was on the same team as their partner\n\np.partners_win_rate()\n\n0.0\n\n\n\nsource\n\n\nhead_to_head\n\n head_to_head (p1:__main__.Player, p2:__main__.Player)\n\nReturns the results of matches where p1 and p2 have played against each other\n\np2 = Player(\"P2\")\np2\n\nCatherine Parenteau, id: P2\n\n\n\nhead_to_head(p,p2)\n\nJesse Irvine has played against Catherine Parenteau in 1 matches and has won 1 times\n\n\n\nsource\n\n\nPlayer.overall_player_impact\n\n Player.overall_player_impact ()\n\nReturns the mean and std of player impact taken over all games played in the database. Player impact is defined as winners + errors forced - unforced errors\n\np.overall_player_impact()\n\n(3.0, 1.4142135623730951)"
  },
  {
    "objectID": "game.html",
    "href": "game.html",
    "title": "Game",
    "section": "",
    "text": "The Game class is a convienient representation of a single pickleball game. It will calculate basic stats for each player.\n\nsource\n\nGame\n\n Game (game_id:str)\n\nA class to represent a game of pickleball.\n\ng = Game('G40')\ng.players\n\n\n\n\n\n  \n    \n      \n      player_id\n      first_nm\n      last_nm\n      supp_nm\n      gender\n      dom_hand\n      maint_dtm\n      maint_app\n      create_dtm\n      create_app\n    \n  \n  \n    \n      8\n      P60\n      Payton\n      Noyes\n      NaN\n      M\n      R\n      2022-11-07 02:44:59.019000+00:00\n      aspancake\n      2022-11-07 02:44:59.019000+00:00\n      aspancake\n    \n    \n      56\n      P49\n      Jon\n      Smet\n      NaN\n      M\n      R\n      2022-09-25 03:10:34.044267+00:00\n      postgres\n      2022-09-25 03:10:34.044267+00:00\n      postgres\n    \n    \n      57\n      P50\n      Alex\n      Spancake\n      NaN\n      M\n      R\n      2022-09-25 03:10:34.048974+00:00\n      postgres\n      2022-09-25 03:10:34.048974+00:00\n      postgres\n    \n    \n      69\n      P59\n      Mike\n      Strain\n      NaN\n      M\n      R\n      2022-11-07 02:44:59.019000+00:00\n      aspancake\n      2022-11-07 02:44:59.019000+00:00\n      aspancake\n    \n  \n\n\n\n\n\nsource\n\n\nGame.plot_impact_flow\n\n Game.plot_impact_flow ()\n\nPlots the impact flow for each player in a given game. Defined as winners + errors_forced - unforced errors.\n\ng.plot_impact_flow()\n\n\n\n\n\nsource\n\n\nGame.summarize_third_shots\n\n Game.summarize_third_shots ()\n\nSummarizes the types of 3rd shots for each player in a game\n\ng.summarize_third_shots()\n\n       Player  Drops %  Drives %  Lobs %  Total Thirds\n Payton Noyes    87.50     12.50     0.0             8\n     Jon Smet    75.00     25.00     0.0             4\nAlex Spancake    33.33     66.67     0.0            12\n  Mike Strain    88.89     11.11     0.0             9\n\n\n\nsource\n\n\nGame.summarize_game\n\n Game.summarize_game ()\n\nPrints a summary of the game.\n\ng.summarize_game()\n\nAnna Leigh Waters & Leigh Waters beat Jesse Irvine & Catherine Parenteau 12-10 in game G1\n             Player  Error %  Winner %\n       Jesse Irvine    17.46      9.52\nCatherine Parenteau     1.59      0.00\n  Anna Leigh Waters     1.59      3.17\n       Leigh Waters     9.52      4.76"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "pklshop",
    "section": "",
    "text": "A library for accessing and analyzing Pickleball data from pklmart. You can find the full documentation here."
  },
  {
    "objectID": "index.html#install",
    "href": "index.html#install",
    "title": "pklshop",
    "section": "Install",
    "text": "Install\nInstall using:\npip install pklshop"
  },
  {
    "objectID": "index.html#how-to-use",
    "href": "index.html#how-to-use",
    "title": "pklshop",
    "section": "How to use",
    "text": "How to use\nThis package includes the latest pickleball data from pklmart already convieniently loaded into pandas dataframes. You can access this data by importing the pklshop.data module using:\nfrom pklshop.data import *\n(Note that since this package is writen using nbdev it is safe to wildcard import because the __all__ variable is automatically generated for each module.)\nAvailable dataframes are:\n\ntable_names\n\n['tournament',\n 'match',\n 'game',\n 'rally',\n 'shot_type_ref',\n 'shot',\n 'player',\n 'team']\n\n\n\nprint(type(team))\nteam.columns\n\n<class 'pandas.core.frame.DataFrame'>\n\n\nIndex(['team_id', 'player_id', 'player_seq_nbr', 'team_nm', 'maint_dtm',\n       'maint_app', 'create_dtm', 'create_app'],\n      dtype='object')\n\n\nThere are also built-in classes to help you analyze the data. For example, you can use the Player class to get a player’s stats or attributes:\n\np = Player(\"P1\")\np2 = Player(\"P2\")\nhead_to_head(p,p2)\n\nJesse Irvine has played against Catherine Parenteau in 1 matches and has won 1 times\n\n\nAnd likewise for Games, Teams, Matches, and Rallys. e.g.:\n\ng = Game(\"G1\")\ng.summarize_game()\n\nAnna Leigh Waters & Leigh Waters beat Jesse Irvine & Catherine Parenteau 12-10 in game G1\n             Player  Error %  Winner %\n       Jesse Irvine    17.46      9.52\nCatherine Parenteau     1.59      0.00\n  Anna Leigh Waters     1.59      3.17\n       Leigh Waters     9.52      4.76\n\n\n\ng.plot_impact_flow()\n\n\n\n\nTo see a more complete analysis in action, check out the examples. For more details, look at the source notebooks in the nbs directory. Also check out Connor and this analysis by conner-mcnicholas on timeout momentum!\nr = Rally(“R1020”) r.animate_rally()"
  },
  {
    "objectID": "name.html",
    "href": "name.html",
    "title": "Name",
    "section": "",
    "text": "source\n\nget_player_name\n\n get_player_name (player_id:str,\n                  players_df:pandas.core.frame.DataFrame=None)\n\nReturns the name of the player with player_id Optionally pass a player_df to use a different table\n\nsource\n\n\nget_team_id\n\n get_team_id (team_name:str, team_df:pandas.core.frame.DataFrame=None)\n\nReturns the team_id of the team with team_name Optionally pass a team_df to use a different table\n\nsource\n\n\nget_team_name\n\n get_team_name (team_id:str, team_df:pandas.core.frame.DataFrame=None)\n\nReturns the name of the team with team_id Optionally pass a team_df to use a different table\n\nsource\n\n\nget_player_id\n\n get_player_id (player_name:str,\n                players_df:pandas.core.frame.DataFrame=None)\n\nReturns the player_id of the player with player_name Optionally pass a player_df to use a different table\n\nplayer_name_test = \"Jesse Irvine\"\nget_player_id(player_name_test)\n\n'Jesse Irvine'"
  },
  {
    "objectID": "rally.html",
    "href": "rally.html",
    "title": "Rally",
    "section": "",
    "text": "set(shot.shot_type_orig.values)\n\n{'A', 'D', 'E', 'L', 'O', 'R', 'SE', 'SP', 'tsDrp', 'tsDrv', 'tsL'}\n\n\n\nsource\n\nanimate\n\n animate (i, ax, fig, position)\n\n\nsource\n\n\nball_travel_distance\n\n ball_travel_distance (x1:float, y1:float, x2:float, y2:float)\n\nReturns the distance between two points\n\nsource\n\n\nplot_court\n\n plot_court ()\n\nPlots the empty pickleball court\n\nsource\n\n\nshot_size\n\n shot_size (shot_num:int)\n\n\nsource\n\n\nShotColor\n\n ShotColor (value, names=None, module=None, qualname=None, type=None,\n            start=1)\n\nAn enumeration.\n\nsource\n\n\nRally\n\n Rally (rally_id:str)\n\nA class to represent a rally\n\nr = Rally(\"R1020\")\n\n\nr.animate_rally()\n\n\n\n\n\nr.plot_rally()"
  },
  {
    "objectID": "data.html",
    "href": "data.html",
    "title": "Data – Getting and processing the data",
    "section": "",
    "text": "In practice, you probably just need to use:\nfrom pklshop.data import *\nwhich will load all the tables in table_names into pandas dataframes which are then usable as variables. You can probably ignore the rest of the functions here unless you want to directly access the pklmart SQL database.\n\ntable_names\n\n['tournament',\n 'match',\n 'game',\n 'rally',\n 'shot_type_ref',\n 'shot',\n 'player',\n 'team']\n\n\nThese are the names of the tables that exist in the pklmart database.\n\nsource\n\nload_dfs_from_csv\n\n load_dfs_from_csv ()\n\nReturns a dictionary of dataframes from the table csv files\nWe can load these tables into a data frame using get_tab_as_df. Note that pklshop comes with the data convienently loaded into pandas dataframes so you don’t need to use this function unless you want to connect directly to the database.\n\nsource\n\n\nget_tab_as_df\n\n get_tab_as_df (table_name:str)\n\nReturns a pandas dataframe for a given table\nImporting pklshop.data automatically calls load_dfs_from_csv for each table so the dataframes are already loaded from import. Here’s an example of creating and displaying a df from the match table.\n\nmatch.head()\n\n\n\n\n\n  \n    \n      \n      match_id\n      tourn_id\n      consol_ind\n      team_id_1\n      team_id_2\n      maint_dtm\n      maint_app\n      create_dtm\n      create_app\n    \n  \n  \n    \n      0\n      M1\n      T1\n      N\n      T1\n      T2\n      2022-04-09 03:19:33.840951+00:00\n      postgres\n      2022-04-09 03:19:33.840951+00:00\n      postgres\n    \n    \n      1\n      M2\n      T2\n      N\n      T2\n      T3\n      2022-05-26 00:45:11.301752+00:00\n      postgres\n      2022-05-26 00:45:11.301752+00:00\n      postgres\n    \n    \n      2\n      M5\n      T5\n      N\n      T6\n      T5\n      2022-06-28 00:40:22.948360+00:00\n      postgres\n      2022-06-28 00:40:22.948360+00:00\n      postgres\n    \n    \n      3\n      M6\n      T6\n      N\n      T5\n      T7\n      2022-07-07 23:01:45.921540+00:00\n      postgres\n      2022-07-07 23:01:45.921540+00:00\n      postgres\n    \n    \n      4\n      M7\n      T7\n      N\n      T8\n      T9\n      2022-07-11 02:40:50.597016+00:00\n      postgres\n      2022-07-11 02:40:50.597016+00:00\n      postgres\n    \n  \n\n\n\n\n\nsource\n\n\ndatabase_tables_to_csv\n\n database_tables_to_csv ()\n\nSaves the dataframes to csv files\nAgain, database_tables_to_csv is only needed when the database itself is updated. You will likely not need to use this function"
  },
  {
    "objectID": "team.html",
    "href": "team.html",
    "title": "Team",
    "section": "",
    "text": "source\n\nTeam\n\n Team (team_id:str)\n\nA class to represent a team\n\nt = Team(\"T1\")\nt\n\nJesse Irvine & Catherine Parenteau\n\n\n\nt.players\n\narray(['P1', 'P2'], dtype=object)\n\n\n\nsource\n\n\nTeam.summarize_team\n\n Team.summarize_team ()\n\nPrints a summary of the team\n\nt.summarize_team()\n\nJesse Irvine & Catherine Parenteau have played 3 games and won 1 games"
  },
  {
    "objectID": "stats.html",
    "href": "stats.html",
    "title": "Stats",
    "section": "",
    "text": "Now let’s look at some overall statsitics we can get from the data.\n\nsource\n\nteam_first_serve_win_frac\n\n team_first_serve_win_frac (team_id:str)\n\nTakes a team id and returns that team’s first serve win fraction.\n\nteam_id_test = 'T2'\nt = Team(team_id_test)\nteam_win_frac_test = t.num_games_won/t.num_games_played\nprint(\"{} won {:.2f}% of games they played\".format(get_team_name(team_id_test), team_win_frac_test*100))\n\nAnna Leigh Waters & Leigh Waters won 66.67% of games they played\n\n\nLet’s look at the win percentage when serving first, marginalized over all games\n\nsource\n\n\nget_frac_first_serve_wins\n\n get_frac_first_serve_wins (game_df:pandas.core.frame.DataFrame)\n\nReturns the fraction of games won by the first searver for a given df of games.\n\nsource\n\n\nget_first_serve_team\n\n get_first_serve_team (game_id:str)\n\nReturns the team_id of the team that served first for a given game with game_id.\n\nfirst_serve_win_frac = get_frac_first_serve_wins(game)\nprint(\"The first serving team won {:.2f}% of games\".format(first_serve_win_frac*100))\n\nThe first serving team won 57.41% of games\n\n\nLet’s see how Jessie Irvine compares to the average\n\nsource\n\n\nget_teams_from_player\n\n get_teams_from_player (player_id:str)\n\nReturns the team_ids of the teams that a player with player_id played for.\n\nplayer_name_test = \"Jesse Irvine\"\nplayer_id_test = get_player_id(player_name_test)\n\n\nplayer_id_test\n\n'P1'\n\n\n\n#Find the teams that Jesse Irvine played for\nteam_ids_test = get_teams_from_player(player_id_test)\nfor team_id in team_ids_test:\n    print(get_team_name(team_id))\n\nJesse Irvine & Catherine Parenteau\nJesse Irvine & Anna Bright\nJesse Irvine & Lucy Kovalova\n\n\n\nsource\n\n\nteam_win_frac\n\n team_win_frac (team_id:str)\n\nReturns the fraction of games won by a team with team_id.\n\nsource\n\n\ngames_played_by_team\n\n games_played_by_team (team_id:str)\n\nReturns the number of games played by a team with team_id.\n\nnet_games_played = sum([games_played_by_team(team_id) for team_id in team_ids_test]) #Number of games played by Jesse Irvine on any team\navg_first_serve_win_frac_test = sum([team_first_serve_win_frac(team_id)* games_played_by_team(team_id) for team_id in team_ids_test])/net_games_played #Average first serve win frac for Jesse Irvine\navg_tot_win_frac_test = sum([team_win_frac(team_id)* games_played_by_team(team_id) for team_id in team_ids_test])/net_games_played #Average total win frac for Jesse Irvine\nprint(\"{}'s average first serve win percentage is {:.2f}%\".format(player_name_test, avg_first_serve_win_frac_test*100))\nprint(\"{}'s average overall win percentage is {:.2f}%\".format(player_name_test, avg_tot_win_frac_test*100))\n\nJesse Irvine's average first serve win percentage is 33.33%\nJesse Irvine's average overall win percentage is 66.67%\n\n\n\nsns.barplot(x=['All first', player_name_test + \" first\", player_name_test + \" overall\"], y=[first_serve_win_frac, avg_first_serve_win_frac_test, avg_tot_win_frac_test], palette=colors)\nplt.title(\"First Serve Advantage?\")\nplt.ylabel(\"Win Percentage\")\n# plt.savefig('figures/first_serve_win_percentage.pdf')\nplt.show()"
  },
  {
    "objectID": "connect.html",
    "href": "connect.html",
    "title": "Connect – Access the pklmart database",
    "section": "",
    "text": "In practice, you can probably just ignore this module. pklshop includes the data from pklmart already loaded into pandas dataframes. Connect is only needed if you want to access the database directly and have permission. It is also used to update the dataframes in pklshop periodically.\n\nsource\n\nconfig\n\n config (filename='../database.ini', section='postgresql')\n\nReads the database.ini file and returns the connection parameters as a dictionary. Assumes the ini file is in the parent directory\nYou will now want to set up a database.ini file. This will contain the sensitive information needed to connect to the databse. To avoid this information being public, be sure to add *.ini to your .gitignore. Once completed, it should look something like this:\n\ndatabase.ini\n[postgresql]\ndatabase=DATABASE\nhost=HOST\nuser=USERNAME\npassword=PASSWORD\nport=PORT\nwhere you replace the uppercase values with the appropriate information.\nWe can now use the config function to get the appropriate information:\n\nparams = config()\n\nWe can now connect to the database using a DbConnection object\n\nsource\n\n\n\nDbConnection\n\n DbConnection (params:dict)\n\nClass to create a connection to the database\nWe can create a DbConnection like this:\n\nconn = DbConnection(params)\n\nNow we want to be able to pull data from the database to use and analyze. We can do this by passing our connection and table name to the pull_data function. Look at the data notebook to see this in action"
  },
  {
    "objectID": "match.html",
    "href": "match.html",
    "title": "Match",
    "section": "",
    "text": "The Match class is a convienient representation of a single pickleball Match. It will calculate basic stats for each player.\n\nsource\n\nMatch\n\n Match (match_id:str)\n\nA class to represent a match of pickleball.\n\nm = Match('M1')\nm\n\nMatch(M1)\n\n\n\nsource\n\n\nMatch.sumarize_match\n\n Match.sumarize_match ()\n\nprints a summary by calling the sumarize_game method for each game in the match\n\nm.sumarize_match()\n\nAnna Leigh Waters & Leigh Waters won 2 games to 1 against Jesse Irvine & Catherine Parenteau\nAnna Leigh Waters & Leigh Waters beat Jesse Irvine & Catherine Parenteau 12-10 in game G1\n             Player  Error %  Winner %\n       Jesse Irvine    17.46      9.52\nCatherine Parenteau     1.59      0.00\n  Anna Leigh Waters     1.59      3.17\n       Leigh Waters     9.52      4.76\nJesse Irvine & Catherine Parenteau beat Anna Leigh Waters & Leigh Waters 11-7 in game G2\n             Player  Error %  Winner %\n       Jesse Irvine     9.26      7.41\nCatherine Parenteau     7.41      7.41\n  Anna Leigh Waters     3.70      5.56\n       Leigh Waters     5.56      3.70\nAnna Leigh Waters & Leigh Waters beat Jesse Irvine & Catherine Parenteau 11-8 in game G3\n             Player  Error %  Winner %\n       Jesse Irvine    13.16      2.63\nCatherine Parenteau     5.26      5.26\n  Anna Leigh Waters     7.89      7.89\n       Leigh Waters    10.53      0.00\n\n\n\nmatch.columns\n\nIndex(['match_id', 'tourn_id', 'consol_ind', 'team_id_1', 'team_id_2',\n       'maint_dtm', 'maint_app', 'create_dtm', 'create_app'],\n      dtype='object')"
  }
]